  <!-- Sharon Story Smith
    2019-09_25
    Train Scheduler
    * When adding trains, administrators will be able to submit the following:
    
        * Train Name
    
        * Destination 
    
        * First Train Time -- in military time
    
        * Frequency -- in minutes
  
  * Calculates when the next train will arrive;  relative to the current time.
  
  * Users from any machine can view same train times. ! -->
 
<!DOCTYPE html>
<html lang="en">

<head>
    <title>Train Scheduler</title>
    <meta charset="utf-8">

 <!--reset the css styling for cross browser support -->
  <link rel="stylesheet" href="assets\css\reset.css"> 

  <!-- Bootstrap CDN--> 
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

  <!-- link to css statements --> 
  <link rel="stylesheet" href="assets\css\style.css">
  
<!-- Resize the browser window to observe grid will respond to the resizing, 
    and always use 100% of the available space. Some elements' heights are unchanging -->
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<!-- Firebase References -->
  <script src="https://www.gstatic.com/firebasejs/6.0.4/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/6.0.4/firebase-database.js"></script> 
  
<!-- jQuery -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

</head>


<body>
  <div class="container">
      <h1>Train Scheduler</h1>
          <!-- form will be placed Here -->
          <div id="input-display">

                <form id="schedule-form">
                  <label for="trainName-input">Train Name</label>
                  <input type="text" id="trainName-input"><br>

                  <label for="dest-input">Destination</label>
                  <input type="text" id="dest-input"><br>

                  <label for="firstTrain-input">First Train Time (military time)</label>
                  <input type="text" id="fristTrain-input"><br>

                  <label for="freq-input">Frequency of Train in minutes, per 24 hours</label>
                  <input type="text" id="freq-input"><br>

                  <!-- Button triggers add of new train schedule -->
                  <input id="add-schedule" type="submit" value="Add this Schedule">
                </form>
          </div>
     <!-- add div for train schedule entries -->
    <div id="schedList-div">  
    </div>
  </div>
  </body>
  
  
 
<script>
 

//ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
//Function to store information about firebase so can connect	
//
function setupFBdatabase() {	
				const firebaseConfig = {
          apiKey: "AIzaSyA8qG2Mg-ou6WD1xIjSBzB7SgeSBNqnrc4",
          authDomain: "sharonproject-1e62b.firebaseapp.com",
          databaseURL: "https://sharonproject-1e62b.firebaseio.com",
          projectId: "sharonproject-1e62b",
          storageBucket: "",
          messagingSenderId: "1274608061",
          appId: "1:1274608061:web:9103d748cc668938"
        }
        return firebaseConfig;
}

	
//fffffffffffffffffffffffffffffffffffffffffffffffffffffffff

function startUp() {  
   
    //initialize firebase   
    firebase.initializeApp(setupFBdatabase()
    
//     .on('error',function(e){
//    console.log("Error: " + hostNames[i] + "\n" + e.message); 
//    console.log( e.stack );
 });
    var fbDB = firebase.database();

    //create a variable to hold our schedule list from firebase
    let firebaseTrainSchedules = fbDB.ref().child('schedules');
console.log(" inside startup");

     // Creating and storing a div tag
    let scheduleDiv = $("<div>");
    // let h2 = $("<h2>").text("Name:  + --------   Dest: ---------------  First Train ------ Frequency:----- <h2>"); 
      $("#scheduleListDiv").append(h2);
    // dowhile not eof {
      // read from fbDB         
          // Creating a paragraph tag with the train data                      
          let p = $("<p>").text("<p>" + trainName + "    " + dest + "   " + firstTrain + "  " + freq + "</p>"); 
				                        
          // Appending the scheduleItem to the HTML page in the "#scheduleListDiv"
          $("#scheduleListDiv").apppend(p);
      // }enddo
     } 



//ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
//this function is called when the add button is clicked
//
function addTrainSchedule() {
  // listener for "add Schedule" button 
  $(".add-schedule").on("click", function() {   
    	//Grab schedule data from the form
			  let scheduleItem = {
          train: $('#trainName-input').val(), 
          dest: $('#dest-input').val(), 
          firstTrain: $('#firstTrain-input').val(), 
          freq: $('#freq-input').val(),
        };

        console.log("ADD: train: "+ scheduleItem.train + "destination  " + scheduleItem.dest + "     First Train: " + 
        scheduleItem.firstTrain + "     Frequency: " + scheduleItem.freq);     

        <!-- check errors -->
      // push (add) to fbDB
      fbDB.ref().set({
        train: $('#trainName-input').val(), 
        dest: $('dest-input').val(), 
        fristTrain: $('firstTrain-input').val(), 
        freq: $('freq-input').val(),        
      })
			
			//'push' (aka add) the schedule to the existing list
			firebaseTrainSchedules.push(scheduleItem); //'scheduleItem' is the name of the 'collection' (aka database table)
			
  }, 
      // Handle the errors
  function(errorObject) {
      console.log("Errors handled: " + errorObject.code);
  });
}
//fffffffffffffffffffffffffffffffffffffffffffffffffffffffff
//this function is called when the firebase database is changed
//
function getTrainSchedules() {
  let htmlLine="";

  // listener for  databse change
  fbDB.ref.on("value", function(snapshot) {

  console.log("get trainSchedules") 
  console.log(snapshot.val());
  console.log(snapshot.val().trainName);
  console.log(snapshot.val().dest);
  console.log(snapshot.val(). firstTrain) 
  console.log(snampshot.val().freq)
  
  },  // Handle the errors
    function(errorObject) {
    console.log("Errors handled: " + errorObject.code);
    }
  );


  // Change the HTML to reflect database changes
  // ??? how do you read to end of file?
  htmlLine= "<p>";
  htmlLine += scheduleItem 
  htmlLine += htmlLine + "</p>";

  //'append' (aka add) the schedule to the existing  html list
  $("#scheduleListDiv").append(htmlLine); 

  };


//ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
<!-- momen.js javascript  -->
<script src="assets/javascript/moment.js"></script>
  startUp();


</script> 


</html>