  <!-- Sharon Story Smith
    2019-09_25
    Train Scheduler
    * When adding trains, administrators will be able to submit the following:
    
        * Train Name
    
        * Destination 
    
        * First Train Time -- in military time
    
        * Frequency -- in minutes
  
  * Calculates when the next train will arrive;  relative to the current time.
  
  * Users from any machine can view same train times. ! -->
  
 
<!DOCTYPE html>
<html lang="en">

<head>
    <title>Train Scheduleer</title>
    <meta charset="utf-8">
   
    <!-- reset the css styling for cross browser support -->
    <link rel="stylesheet" href="assets\css\reset.css"> 

    <!-- bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!-- link to css statements --> 
        <link rel="stylesheet" href="assets\css\style.css">

    <!-- Resize the browser window to observe grid will respond to the resizing, 
        and always use 100% of the available space. Some elements' heights are unchanging -->
    <meta name="viewport" content="width=device-width,initial-scale=1.0">

</head>


<body>
  <div class="container">
    <h1>Train Scheduler</h1>

    <!-- Button will be placed Here -->
    <div id="input-display">

      <form id="schedule-form">
        <label for="trainName-input">Train Name</label>
        <input type="text" id="trainName-input"><br>

        <label for="dest-input">Destination</label>
        <input type="text" id="dest-input"><br>

        <label for="firstTrain-input">First Train Time (military time)</label>
        <input type="text" id="fristTrain-input"><br>

        <label for="freq-input">Frequency of Train in minutes, per 24 hours</label>
        <input type="text" id="freq-input"><br>

        <!-- Button triggers add of new train schedule -->
        <input id="add-schedule" type="submit" value="Add this Schedule">
      </form>
    </div>

     <!-- add div for train schedule entries -->
    <div id="schedList-div">  
    </div>
  </div>
  </body>
  <!-- jQuery -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

	<!-- Bootstrap JS -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

	<script src="https://www.gstatic.com/firebasejs/4.7.0/firebase.js"></script>
 
<script>

//ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
//Function to store information about firebase so can connect	
//
function setupFBdatabase {	
				const firebaseConfig = {
          apiKey: "AIzaSyA8qG2Mg-ou6WD1xIjSBzB7SgeSBNqnrc4",
          authDomain: "sharonproject-1e62b.firebaseapp.com",
          databaseURL: "https://sharonproject-1e62b.firebaseio.com",
          projectId: "sharonproject-1e62b",
          storageBucket: "",
          messagingSenderId: "1274608061",
          appId: "1:1274608061:web:9103d748cc668938"
        }
}

	
//fffffffffffffffffffffffffffffffffffffffffffffffffffffffff
//
function startUp {  		
    //initialize firebase
    console.log("in startup");
    firebase.initializeApp(firebaseConfig);
    var fbDB = firebase.database();

    //create a variable to hold our schedule list from firebase
    let firebaseTrainSchedules = fbDB.ref().child('schedules');

     // Creating and storing a div tag
    let scheduleDiv = $("<div>");
    // let h2 = $("<h2>").text("Name:  + --------   Dest: ---------------  First Train ------ Frequency:----- <h2>"); 

    dowhile not eof {
      // read from fbDB         
          // Creating a paragraph tag with the train data                      
          // let p = $("<p>").text("<p>" + trainName + "    " + dest + "   " + firstTrain + "  " + freq + </p>); 
				                        
          // Prependng the scheduleItem to the HTML page in the "#scheduleListDiv"
                        $("#scheduleListDiv").prepend(p);
            }enddo
     } 



//ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
//this function is called when the add button is clicked
//
function addTrainSchedule() {
  // listener for "add Schedule" button 
  $(".add-schedule").on("click", function() {
    
console.log("ADD destination: "+" dest-input + "     First Train: " + firstTrain-input + "     Frequency: " + freq-input);     
    	//Grab schedule data from the form
			  let scheduleItem = {
        
				train: $('#trainName-input').val(), 
				dest-input: $('dest-input').val(), 
        fristTrain-input: $('firstTrain-input').val(), 
        freq: $('freq-input').val(),

        <!-- check errors -->

			};
      // push (add) to fbDB
      fbDB.ref().set({
        train: $('#trainName-input').val(), 
        dest-input: $('dest-input').val(), 
        fristTrain-input: $('firstTrain-input').val(), 
        freq: $('freq-input').val(),        
      })
			
			//'push' (aka add) the schedule to the existing list
			firebaseTrainSchedules.push(scheduleItem); //'scheduleItem' is the name of the 'collection' (aka database table)
			
  }, 
      // Handle the errors
  function(errorObject) {
      console.log("Errors handled: " + errorObject.code);
  });

}
//fffffffffffffffffffffffffffffffffffffffffffffffffffffffff
//this function is called when the firebase database is changed
//
function getTrainSchedules() {

  // listener for  databse change
  fbDB.ref.on("value", function(snapshot {

  console.log("get trainSchedules") 
  console.log(snapshot.val());
  console.log(snapshot.val().trainName);
  console.log(snapshot.val().dest);
  console.log(snapshot.val(). firstTrain) 
  console.log(snampshot.val().freq)
  
  )},  // Handle the errors
    function(errorObject) {
    console.log("Errors handled: " + errorObject.code);
    }


  // Change the HTML to reflect database changes
  // ??? how do you read to end of file?
  htmlLine= "<p>";
  htmlLine= scheduleItem 
  htmlLine = htmlLine + "</p>";

  //'append' (aka add) the schedule to the existing  html list
  (#scheduleListDiv).append(htmlLine); 

  };
	};  
}
})
//ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff


  <!-- Added link to the jQuery Library -->
  <src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js">
  <!-- Added for firebase-->
  <script src="https://www.gstatic.com/firebasejs/4.7.0/firebase.js"></script>
</body>
</script> 
</html>